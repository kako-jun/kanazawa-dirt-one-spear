# 分析手法とコンテンツ戦略

金沢競馬データ（2015-2025年、約8,500レース）の分析アイデアとコンテンツ化戦略

---

## 目次

1. [分析プロセスのコンテンツ化戦略](#1-分析プロセスのコンテンツ化戦略)
2. [公正性検証・八百長検知](#2-公正性検証八百長検知)
3. [統計分析・傾向把握](#3-統計分析傾向把握)
4. [馬のタイプ分類](#4-馬のタイプ分類)
5. [可視化・ダッシュボード](#5-可視化ダッシュボード)
6. [異常検知・外れ値分析](#6-異常検知外れ値分析)
7. [時系列分析](#7-時系列分析)
8. [ネットワーク分析](#8-ネットワーク分析)
9. [経済分析](#9-経済分析)
10. [金沢競馬だけ異常に詳しい独自機能](#10-金沢競馬だけ異常に詳しい独自機能)
11. [実装優先順位](#11-実装優先順位)

---

## 1. 分析プロセスのコンテンツ化戦略

### コンセプト

**「予想の試行錯誤プロセスをすべて公開し、ユーザー向けコンテンツとして再利用する」**

分析手法の検証結果が「効果あり」「効果なし」どちらであっても、それは価値ある発見。
すべての試行を記録し、透明性のある予想システムとしてユーザーに見せる。

> 「私は失敗したことがない。ただ、1万通りのうまくいかない方法を見つけただけだ」
> — トーマス・エジソン

### 基本方針

#### 1. すべての分析を記録する

**効果があった分析**:
- 「この分析により勝率が3%向上しました」
- フロントエンドで「採用した分析手法」として紹介

**効果がなかった分析**:
- 「この仮説は統計的に有意な差がありませんでした」
- フロントエンドで「検証したが効果がなかった手法」として公開
- **これも価値ある情報**

#### 2. 学習プロセスを共有する

**私（Claude）の役割**:
- 分析手法の理論を初心者向けに説明
- 図解を提供
- 統計学の基礎概念を噛み砕いて解説

**ユーザー（開発者）の役割**:
- 理論を理解しながら実装
- 図解を加工してフロントエンド用に調整
- 検証結果を記録

**エンドユーザーへの還元**:
- 加工した図解と説明をサイトに掲載
- 「予想システムがどう作られたか」を透明化

#### 3. 完全に無駄のないサイクル

```
[1] 分析手法の提案
  ↓
[2] 理論説明（図解付き）
  ↓
[3] 実装・検証
  ↓
[4] 結果の記録（効果あり/なし）
  ↓
[5] フロントエンドコンテンツ化
  ↓
[6] ユーザーの信頼・興味向上
```

---

### 1.1 分析手法のカタログ

#### テンプレート構造

各分析手法を以下の形式で記録:

```markdown
# 分析手法 #XX: [手法名]

## 仮説
何を検証したいか？

## 理論説明（初心者向け）
なぜこの分析をするのか？
統計学的な背景は？

## 図解
視覚的に理解できる図

## 実装方法
コード例・手順

## 検証結果
- データ: 何年分、何レース
- 統計値: p値、効果量など
- 結論: 効果あり/なし

## 解釈
結果から何がわかったか？

## フロントエンド表示
ユーザー向けにどう見せるか
```

---

### 1.2 分析手法の例（20個のアイデア）

#### グループA: 基礎統計（初心者向け）

**分析1: 枠番別の勝率**
- 仮説: 内枠は有利か？
- 理論: カイ二乗検定で有意差を確認
- 図解: 枠番別勝率の棒グラフ
- 結果例: 効果あり、1〜3枠は統計的に有意に高い（p < 0.001）

**分析2: 人気順と勝率の関係**
- 仮説: オッズは信頼できるか？
- 理論: オッズは大衆の予想を反映、どれくらい信頼できるか数値化
- 図解: 人気順別の勝率（1番人気: 32.5%、2番人気: 18.2%...）
- 結果例: 効果あり、相関係数0.68

**分析3: 前走着順と今回成績**
- 仮説: 前走好調な馬は今回も好調か？
- 理論: 調子の波がある、連続好走の確率を計算
- 図解: 前走着順別の今回勝率
- 結果例: 効果あり、過去3走の成績を特徴量化

---

#### グループB: 中級分析（統計学）

**分析4: 馬場状態×距離の交互作用**
- 仮説: 重馬場では短距離が有利？
- 理論: 2元配置分散分析（ANOVA）で交互作用効果を検証
- 図解: ヒートマップ（馬場×距離）
- 結果例: 効果あり、重馬場では短距離で勝率上昇（p < 0.01）

**分析5: 休養明けのパフォーマンス低下**
- 仮説: 3ヶ月以上休むと調子が落ちる？
- 理論: t検定で比較、効果量（Cohen's d）も算出
- 図解: 箱ひげ図（通常時 vs 休養明け）
- 結果例: 効果あり、Cohen's d = 0.42（中程度の効果）

**分析6: 騎手×馬の相性**
- 仮説: 特定の騎手×馬の組み合わせは好成績？
- 理論: 騎乗回数10回以上のペアを抽出、期待勝率 vs 実際の勝率を比較
- 図解: 相性スコア（騎手A × 馬X: +8.5%）
- 結果例: 効果弱い、データ不足で今後再検証

---

#### グループC: 機械学習（高度）

**分析7: LightGBMによる特徴量重要度**
- 仮説: どの要素が最も予想に効くか？
- 理論: 機械学習で自動的に重要な特徴量を発見、SHAP値で解釈
- 図解: 特徴量重要度（オッズ: 0.35、前走着順: 0.22...）
- 結果例: 効果あり、毛色・誕生月は無関係と判明

**分析8: クラスタリングで馬のタイプ分類**
- 仮説: 似た特性の馬はグループ化できる？
- 理論: K-means法で「短距離型」「スタミナ型」「万能型」に分類
- 図解: 散布図（PCA後の2次元プロット）
- 結果例: 効果あり、3つのクラスタに分類

**分析9: 時系列分析（調子の波）**
- 仮説: 馬には好不調の周期がある？
- 理論: 過去10走の成績推移、移動平均で「上昇トレンド」を検出
- 図解: 時系列グラフ
- 結果例: 効果弱い、ノイズが多く明確な周期なし

---

#### グループD: オカルト検証（娯楽性）

**分析10: 満月の日は荒れる？**
- 仮説: 満月・新月で結果が荒れる？
- 理論: 疑似科学だが検証する価値あり
- 図解: 月齢別の波乱度
- 結果例: 効果なし、統計的有意差なし（p = 0.87）→ **オカルトとして不採用だがコンテンツ化**

**分析11: 馬名に「王」が入ると強い？**
- 仮説: 縁起の良い名前は勝つ？
- 理論: 完全にネタ検証
- 図解: 馬名に含まれる文字別勝率
- 結果例: 効果なし、偶然の範囲内 → **ネタコンテンツとして公開**

---

### 1.3 検証結果の記録

#### データベース設計

**analysis_methods** テーブル:
```sql
CREATE TABLE analysis_methods (
    method_id INTEGER PRIMARY KEY,
    method_name VARCHAR,
    category VARCHAR,  -- '基礎統計', '機械学習', 'オカルト', etc.
    hypothesis TEXT,
    theory_explanation TEXT,
    diagram_path VARCHAR,
    implementation_code TEXT,
    status VARCHAR,  -- 'testing', 'effective', 'ineffective'
    created_at TIMESTAMP
);
```

**analysis_results** テーブル:
```sql
CREATE TABLE analysis_results (
    result_id INTEGER PRIMARY KEY,
    method_id INTEGER,
    test_date DATE,
    dataset_size INTEGER,
    p_value FLOAT,
    effect_size FLOAT,
    conclusion TEXT,
    detailed_report TEXT,
    adopted BOOLEAN
);
```

---

### 1.4 フロントエンドでの表示

#### 1. 「予想の仕組み」ページ

採用した分析手法のみ、図解付きで説明

```
┌────────────────────────────────────┐
│ 採用した分析手法                   │
├────────────────────────────────────┤
│ ✅ 枠番別勝率分析                  │
│    内枠は統計的に有利（p<0.001）  │
│    → 予想モデルに採用             │
│    [図解]                         │
└────────────────────────────────────┘
```

#### 2. 「検証した分析」ページ

すべての分析を公開（効果あり/なし両方）

```
┌────────────────────────────────────┐
│ 検証した分析一覧                   │
├────────────────────────────────────┤
│ ✅ 効果あり: 枠番別分析            │
│ ✅ 効果あり: 前走成績分析          │
│ ❌ 効果なし: 満月オカルト          │
│ ❌ 効果なし: 馬名の縁起            │
│ 🔬 検証中: 騎手×馬の相性          │
└────────────────────────────────────┘
```

#### 3. 「分析の舞台裏」ブログ

記事形式で公開:
- 「満月の日は本当に荒れるのか？統計で検証」
- 「内枠有利は金沢競馬でも成立するか」
- 「AIが見つけた意外な予測因子とは」

---

### 1.5 図解のテンプレート

提供する図の種類:
1. **棒グラフ**: 枠番別勝率、人気順別勝率
2. **折れ線グラフ**: 時系列推移、調子の波
3. **ヒートマップ**: 馬場×距離、騎手×馬
4. **散布図**: クラスタリング、相関分析
5. **箱ひげ図**: 分布の比較
6. **ツリー構造**: 決定木の可視化
7. **SHAP図**: 特徴量重要度

---

### 1.6 実装ロードマップ

**フェーズ1: 基礎分析（現在）**
1. 枠番別勝率
2. 人気順と勝率
3. 前走成績
4. 馬場状態×距離
5. 休養明け効果

**フェーズ2: 機械学習導入（3ヶ月後）**
6. LightGBM実装
7. 特徴量重要度分析
8. クラスタリング
9. 時系列分析
10. ハイパーパラメータチューニング

**フェーズ3: 高度な分析（6ヶ月後）**
11. ディープラーニング（実験）
12. アンサンブル学習
13. ベイズ最適化
14. 強化学習（実験）
15. テキスト分析（レース名から傾向予測）

**フェーズ4: オカルト検証（娯楽）**
16. 満月効果
17. 馬名の縁起
18. 誕生日の馬は勝つ？
19. 背番号のジンクス
20. 天気と勝率

---

## 2. 公正性検証・八百長検知

### 2.1 オッズと結果の整合性チェック

**分析手法**:
- オッズ（人気）と着順の相関係数を計算
- カイ二乗検定で独立性を検証
- 期待値との乖離度を計算

**異常パターン**:
- 1番人気の勝率が統計的に低すぎる
- 10番人気以下が不自然に高頻度で馬券圏内
- 特定の騎手・調教師の組み合わせでオッズと結果が乖離

---

### 2.2 ベンフォードの法則

**理論**: 自然発生的な数値の先頭桁は特定の分布に従う（1が30%、2が18%...）、不正データは均等分布に近づく

**適用対象**:
- 三連単配当の先頭桁分布
- 単勝配当の先頭桁分布
- ゴールタイムの先頭桁分布

```python
# ベンフォード分布
benford = [0.301, 0.176, 0.125, 0.097, 0.079, 0.067, 0.058, 0.051, 0.046]

# カイ二乗検定
chi2, p_value = chisquare(observed, benford)
# p < 0.05 なら不自然
```

---

### 2.3 コーナー通過順の不自然なパターン

**着目点**:
- 最終コーナー1位 → ゴール5位以下（急失速）
- 3コーナーまで最下位 → 4コーナーで急上昇 → 1位（不自然な追い込み）
- 同じ馬が「勝つレース」と「負けるレース」で走り方が全く異なる

---

### 2.4 高配当レースの頻度分析

**理論**: 三連単の期待配当分布は対数正規分布に従うはず、不正がある場合、特定範囲に偏る

**分析**:
- 10万円超の超高配当レースの発生頻度
- ポアソン分布でモデル化し、実測値と比較
- 特定の月・曜日に集中していないか

---

### 2.5 騎手・調教師のパフォーマンス異常

**着目点**:
- 同じ騎手が同じ馬で「勝率100%の期間」と「勝率0%の期間」
- 特定の調教師の馬が「勝つとき」のオッズパターン
- 騎手A×調教師Bの組み合わせでのみ異常勝率

---

## 3. 統計分析・傾向把握

### 3.1 競馬オカルトの科学的検証

**目的**: 競馬界で語り継がれる「オカルト」が統計的に本当か検証する

**検証項目**:

**1. 「内枠有利・外枠不利」**
- 仮説: 1-2枠が有利、7-8枠が不利
- 検証: 枠番別勝率をカイ二乗検定
- 結果: 距離別・馬場状態別に層別分析

**2. 「雨の日は荒れる」**
- 仮説: 雨天時は人気薄が好走し、高配当が出やすい
- 検証: 天候別の配当分布を比較、t検定で有意差を検証

**3. 「連続出走は疲労で負けやすい」**
- 仮説: 連続出走（中1週以下）は成績が落ちる
- 検証: 休養週数別の勝率比較

**4. 「人気の盲点（4-6番人気が狙い目）」**
- 仮説: 1-3番人気はオッズが低く旨味がない、7番人気以下は実力不足、4-6番人気が期待値高い
- 検証: 人気別の回収率計算

**5. 「重賞明けは負けやすい」**
- 仮説: 重賞（大きなレース）の直後は調整不足で負ける
- 検証: 前走レースグレード別の今走成績

**6. 「大外一気」は都市伝説？**
- 仮説: 最後方から一気に差すパターンは実は稀
- 検証: 4コーナー最下位からの1着率を計算

**7. 「ゴール前で差されやすい馬」**
- 仮説: 特定の馬は「あと一歩で届かない」パターンが多い
- 検証: 4コーナー1位 → ゴール2-3着の頻度

**8. 「満月の日は荒れる」（疑似科学）**
- 仮説: 満月の日は配当が高くなる（疑似科学的）
- 検証: 月齢データと配当の相関分析
- 期待: おそらく相関なし（p > 0.05）→ オカルトを否定

**9. 「ベテラン騎手は大舞台に強い」**
- 仮説: 重賞レースでは経験豊富な騎手が有利
- 検証: 騎手経験年数 × レースグレードの交互作用

**10. 「追い込み馬は展開次第」**
- 仮説: 前が速いペースだと追い込み有利、遅いと不利
- 検証: 1-2コーナーの平均ペース × 脚質別の勝率

**オカルト検証レポート**:
- 各検証結果を「科学的根拠あり」「オカルト（根拠なし）」に分類
- ブログ記事化: 「金沢競馬10年分のデータで競馬オカルトを検証してみた」
- 面白い発見を可視化してSNSで拡散

---

### 3.2 騎手ランキング

**指標**:
- 勝率、連対率、複勝率
- 平均着順
- 回収率（単勝、三連単）
- 馬場状態別成績
- 距離別成績

**可視化**:
- レーダーチャート（総合力）
- ヒートマップ（騎手×馬場状態）

---

### 3.3 馬場状態の影響

**分析**:
- 「良」「稍重」「重」「不良」での勝率変化
- 馬場悪化時に強い騎手/馬
- 雨天時の配当傾向（荒れやすいか）

---

### 3.4 枠番有利・不利

**分析**:
- 1-8枠の勝率比較
- 距離別の有利枠（1400mは内枠有利、1700mは外枠有利、など）
- カイ二乗検定で統計的有意性を検証

---

### 3.5 人気と配当の関係

**分析**:
- 1番人気の勝率（他競馬場との比較）
- 人気薄（10番人気以下）の複勝率
- 三連単の「堅い決着」「大波乱」の比率

---

### 3.6 季節・曜日の傾向

**分析**:
- 春/夏/秋/冬の配当平均
- 土日vs平日のレース質
- ゴールデンウィーク、お盆などイベント時の傾向

---

## 4. 馬のタイプ分類

### 問題意識

10年前の馬のデータは直接使えないが、「似たタイプの馬」という概念で活用可能

### 実装アプローチ

**ステップ1: 馬のタイプ分類**

```python
# クラスタリングで馬をタイプ分け
from sklearn.cluster import KMeans

# 特徴量: 体重、距離適性、脚質、馬場適性など
horse_features = [
    'avg_distance',        # 平均出走距離
    'running_style',       # 脚質（逃げ=1, 先行=2, 差し=3, 追込=4）
    'track_preference',    # 馬場適性（良馬場での勝率）
    'age_at_peak',         # ピーク年齢
    'weight_avg',          # 平均体重
]

# K-meansで5つのタイプに分類
# タイプ例: 「スプリンター型」「マイラー型」「ステイヤー型」など
kmeans = KMeans(n_clusters=5)
horse_types = kmeans.fit_predict(horse_data[horse_features])
```

**ステップ2: タイプ別の傾向を学習**

過去10年間の「タイプ1」の馬の成績を集計し、現在の「タイプ1」の馬に適用

**ステップ3: 類似馬検索**

コサイン類似度で似た馬を検索し、類似馬の過去成績から傾向を学習

**活用例**:
- 新馬（デビュー馬）の予想: 似た体格・血統の過去馬から推測
- 距離変更時の予想: 似た馬が距離変更でどうだったか
- 馬場変化への対応: 似た馬が重馬場でどうだったか

---

## 5. 可視化・ダッシュボード

### 5.1 Streamlitダッシュボード

**ページ構成**:

**トップページ**:
- 総レース数、総配当額
- 最高配当レースのハイライト
- 直近の予想的中率

**騎手分析**:
- 騎手選択 → 成績サマリー
- 勝率推移グラフ（時系列）
- 得意距離・馬場のヒートマップ

**レース検索**:
- 日付・レース番号で検索
- 出馬表、結果、配当を表示
- コーナー通過順の可視化（折れ線グラフ）

**予想シミュレーション**:
- 過去レースを選択
- モデルの予想結果と実際の結果を比較
- 「もし予想通り買っていたら」の収支計算

---

### 5.2 コーナー通過順のアニメーション

- Plotly/Matplotlibで各馬の位置変化をアニメーション
- 1コーナー → 2コーナー → 3コーナー → 4コーナー → ゴール
- 逆転劇、大逃げ、追い込み成功などを視覚化

---

### 5.3 配当分布の可視化

- ヒストグラム（対数スケール）
- 箱ひげ図（賭式別）
- バイオリンプロット（年度別）

---

## 6. 異常検知・外れ値分析

### 6.1 Isolation Forest

全レースを多次元空間にプロット（配当、人気、コーナー順位変化など）、外れ値を検出 → 異常レースとしてマーク

### 6.2 LOF（Local Outlier Factor）

騎手のパフォーマンスベクトル（勝率、平均着順、回収率）から、他の騎手と大きく異なる行動パターンを検出

### 6.3 時系列異常検知

Prophet（Facebook）で配当額の時系列予測、予測誤差が大きい日を「異常日」として抽出

---

## 7. 時系列分析

### 7.1 勝率の推移

- 特定騎手の勝率推移（移動平均）
- 「好調期」「不調期」の検出
- 調子の波のサイクル（周期性分析）

### 7.2 配当額のトレンド

- 三連単平均配当の年次推移
- 「荒れる時期」「堅い時期」の季節性
- ARIMA/SARIMAモデルで将来予測

### 7.3 オッズ変動パターン

もし時系列オッズが取れれば、「直前人気急上昇」などを検出

---

## 8. ネットワーク分析

### 8.1 騎手-調教師ネットワーク

- ノード: 騎手、調教師
- エッジ: 共同回数（重み）
- コミュニティ検出: 特定グループの存在

### 8.2 馬-騎手の相性ネットワーク

- 特定の馬×騎手の組み合わせで勝率が高い
- NetworkXでグラフ構築 → 中心性指標

---

## 9. 経済分析

### 9.1 回収率シミュレーション

**戦略**:
- 全レース三連単1点買い → 回収率XX%
- 人気薄狙い（5-10番人気の組み合わせ）→ 回収率YY%
- モデル予想上位3頭のBOX買い → 回収率ZZ%

**比較**: ランダム購入、人気順購入、AI予想購入

### 9.2 期待値分析

- 各馬券の期待値 = 払戻金 × 的中確率 - 購入額
- 期待値プラスの馬券だけを購入したら？

### 9.3 ケリー基準による賭け金最適化

```
f* = (bp - q) / b
f*: 賭け金比率
b: オッズ-1
p: 的中確率
q: 外れ確率
```

モデルで的中確率を推定し、オッズと比較して「割の良い馬券」を検出、最適賭け金を計算

---

## 10. 金沢競馬だけ異常に詳しい独自機能

### コンセプト

**「なぜか金沢競馬だけは異常に詳しいファンサイトがある」**

中央競馬のnetkeibaでさえやっていないような、マニアックで愛情深いデータ分析を金沢競馬でだけ実現する。

---

### 10.1 「なんでそこまで調べた？」系機能

#### 1. 馬名の由来データベース

**目的**: 馬名に込められたストーリーを紹介

**実装内容**:
- 馬名の意味・由来を収集（手動＋クラウドソーシング）
- カテゴリ分類: 神話・歴史上の人物、地名・観光地、外国語、オーナーの思い入れ、親馬の名前の組み合わせ
- 面白い名前コレクション
- 「長い名前ランキング」「短い名前ランキング」

**データ収集方法**:
- JBISサーチから血統情報取得
- ユーザー投稿機能（「この馬名の由来知ってます」）
- 厩舎・オーナーへの取材（将来的に）

#### 2. 厩舎別の得意パターン分析

**目的**: 厩舎ごとの傾向を徹底分析

**実装内容**:
- **得意距離**: A厩舎は1500mが強い
- **得意馬場**: B厩舎は重馬場で勝率アップ
- **得意レースクラス**: C厩舎はC2が強い
- **調教スタイル推定**: データから逆算
- **厩舎×騎手の相性**: よく組む騎手との成績

#### 3. 「連続〇着」記録集

**目的**: 不名誉だけど愛すべき記録

**実装内容**:
- 連続2着記録（惜しい馬）
- 連続最下位記録
- 連続3着以内外記録
- 「復活劇」: 長期低迷→突然の勝利

#### 4. レース名の歴史と変遷

**目的**: レース名から見る金沢競馬の文化

**実装内容**:
- 定番レースの名前の変化（例: 北國王冠の歴史）
- 個人記念レース一覧（過去10年分）
- スポンサーレースの変遷
- 「面白い記念レース名」ランキング

#### 5. 個人記念レースのストーリー収集

**目的**: レース名に込められた思いを紹介

**実装内容**:
- 記念レースの背景取材（可能な範囲で）
- 「こんな記念レースがありました」コレクション
- ユーザー投稿: 「私もいつか記念レース出したい」
- 記念レースの申し込み方法ガイド

---

### 10.2 マニアックすぎる統計

#### 6. 誕生月別の成績分析

**目的**: 早生まれは本当に不利なのか？

**実装内容**:
- 1月生まれ〜12月生まれの勝率
- 年齢別での比較（3歳時、4歳時...）
- 早生まれハンデは存在するか
- 「〇月生まれが強い」傾向の発見

#### 7. 毛色別の成績

**目的**: 毛色に有利不利はあるのか

**実装内容**:
- 毛色別勝率（栗毛、鹿毛、青鹿毛、青毛、芦毛、白毛）
- 距離別・馬場別での毛色傾向
- 「芦毛は目立つから有利？」を検証

#### 8. ゲート番号別の生涯成績

**目的**: 「内枠有利」は本当か？

**実装内容**:
- 1〜12番ゲートの通算勝率
- 距離別のゲート有利不利
- 馬場状態別のゲート有利不利
- 「外枠一気」は金沢では難しい？

#### 9. 最も「惜しい」馬ランキング

**目的**: 2着ばかりの馬に光を当てる

**実装内容**:
- 2着回数ランキング
- 勝利数 vs 2着回数の比率
- 「2着職人」の紹介
- 「ついに勝った！」瞬間の記録

#### 10. 馬齢×距離の最適マトリクス

**目的**: 年齢ごとの得意距離を可視化

**実装内容**:
- ヒートマップで表示
- 「若いうちは短距離、ベテランは中距離」のような発見

#### 11. 騎手の「決め技」分析

**目的**: 騎手ごとの勝ちパターンを解析

**実装内容**:
- 逃げ・先行・差し・追込の得意戦法
- 勝利時の平均ポジション（4コーナー時点）
- 「この騎手は追込型」などの傾向
- 騎手×戦法×距離の3次元分析

#### 12. 「奇跡の復活劇」コレクション

**目的**: ドラマチックな復活ストーリー

**実装内容**:
- 長期低迷後の勝利
- 引退寸前からの復活
- ベテラン馬の意地の勝利
- 人気薄からの大波乱

#### 13. 天候×時間帯×馬場の複合分析

**目的**: 超細かい条件での傾向分析

**実装内容**:
- 「雨の日の最終レース」の傾向
- 「晴れの日の14時台」の内枠勝率
- 「重馬場の第1レース」は荒れる？

#### 14. オッズの歪み検出

**目的**: 「実力に対して人気がない」馬を発見

**実装内容**:
- 過去成績から期待勝率を算出
- オッズから暗黙の勝率を逆算
- 期待勝率 > オッズ勝率 = 狙い目
- 「隠れた実力馬」リスト

#### 15. レース間隔と成績の関係

**目的**: 「連闘は不利」は本当か

**実装内容**:
- 前走から何日後か？ごとの勝率
- 連闘（1週間以内）の成績
- 休養明け（3ヶ月以上）の成績
- 最適な間隔は？

---

### 10.3 データビジュアライゼーションの工夫

**インフォグラフィック**:
- 「金沢競馬 10年の歩み」ポスター
- 「馬の一生」タイムライン
- 「騎手のキャリアパス」可視化

**インタラクティブ探索**:
- 「あなたと同じ誕生日の馬を探そう」
- 「好きな色から馬を探す」（毛色検索）
- 「かっこいい名前でフィルタ」

**ストーリーテリング**:
- 「今週の注目馬」のバックストーリー
- 「10年前のこの日」アーカイブ
- 「今日は〇〇号の誕生日」通知

---

### 10.4 ソーシャル要素

**ユーザー参加型コンテンツ**:
- 「私のイチオシ馬」投稿
- 「馬名の由来、知ってます！」情報提供
- 「思い出のレース」エピソード募集
- 「復活してほしい馬」投票

**コミュニティ機能**:
- 「〇〇厩舎ファンクラブ」
- 「この馬を応援する会」
- 掲示板: 「今日のレース語ろう」

---

### 10.5 技術的な挑戦

**機械学習の応用**:
- 馬名の自動分類（AI）
- 「似た経歴の馬」レコメンド
- 画像認識: 毛色自動判定（将来）

**自然言語処理**:
- レース名からの感情分析
- 「ポジティブな名前」ランキング
- エピソード自動要約

---

### 10.6 期待される効果

**話題性**:
- 「金沢競馬だけやたら詳しいサイト」としてSNSで拡散
- 競馬メディアでの紹介
- 「他の競馬場でもやってほしい」の声

**愛着の醸成**:
- データだけでなくストーリーで馬を知る
- 「惜しい馬」「頑張ってる馬」にも光が当たる
- ユーザーが「語り部」になる

**金沢競馬への貢献**:
- 注目度アップ → 来場者増
- 「こんなに面白いんだ」という発見
- 馬券購入への動機付け

---

## 11. 実装優先順位

### フェーズ1: データ整備（現在進行中）
- [x] スクレイピング
- [ ] データクレンジング
- [ ] データベース整備

### フェーズ2: 基礎分析
1. 記述統計（勝率、配当分布）
2. 騎手ランキング
3. 枠番・馬場状態分析
4. 可視化ダッシュボード構築

### フェーズ3: 公正性検証
1. ベンフォード検証
2. オッズ-結果整合性チェック
3. 異常レース検出
4. レポート作成

### フェーズ4: 予想モデル
1. LightGBM Ranker実装
2. 特徴量エンジニアリング
3. モデル評価
4. 実運用シミュレーション

### フェーズ5: 高度な分析
1. ニューラルネット
2. アンサンブル
3. ネットワーク分析
4. 時系列予測

### フェーズ6: 独自機能実装
1. 厩舎別分析
2. ゲート番号別統計
3. 毛色別統計
4. 馬齢×距離マトリクス
5. 連続記録集
6. 復活劇コレクション
7. レース名変遷
8. 個人記念レース紹介
9. 誕生月別分析
10. オッズ歪み検出
11. 騎手の決め技分析
12. 天候×時間×馬場の複合分析
13. 馬名由来データベース（ユーザー投稿）
14. 「私のイチオシ」機能
15. 掲示板・コミュニティ

---

## まとめ

### 「すべての試行が価値になる」

効果がある分析も、ない分析も、すべて記録して公開する。
これにより:

1. **透明性**: ブラックボックスでない予想システム
2. **教育価値**: 統計学を学べるコンテンツ
3. **娯楽性**: オカルト検証で話題性
4. **信頼性**: 科学的な姿勢が伝わる
5. **コミュニティ**: 議論が生まれる

開発プロセスそのものがコンテンツになる。
**完全に無駄のない、持続可能な開発サイクル。**

### 「金沢競馬のことなら、ここを見れば全部わかる」

中央競馬ファンが「地方競馬ってこんなに面白いんだ」と気づくきっかけになり、
金沢競馬場の存続に貢献する。
