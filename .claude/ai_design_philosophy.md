# AI予想システム設計哲学

## オッズと人間のバイアスに関する考察

### 核心的な問いかけ

**オッズは人間の行動で決まるものであり、みんなの思い込みでありバイアスである。**

これを予想に組み込むのと、まったく考慮しないのとで比較すると面白い実験ができる。

### 実験的アプローチ

#### パターンA: オッズ完全無視型AI
- **特徴**: 純粋に馬の能力・過去成績・血統・騎手・馬場状態などの客観的データのみで予想
- **哲学**: 大穴の馬だろうと、オッズを事前に見なければAIは「大穴」と思わない
- **メリット**:
  - 人間の集団心理バイアスに影響されない
  - 過小評価されている馬を発見できる可能性
  - 「AIの独自判断」が明確
- **デメリット**:
  - 人間の知恵（オッズに反映される情報）を捨てている
  - 回収率が低くなる可能性

#### パターンB: オッズ考慮型AI
- **特徴**: 客観的データ + オッズ（人間の集合知）を特徴量として組み込む
- **哲学**: 人間の予想には何らかの合理性がある
- **メリット**:
  - 人間の集合知を活用できる
  - 回収率向上の可能性
  - 「人気薄の中から有望馬を選ぶ」という戦略が可能
- **デメリット**:
  - 人間のバイアスに引きずられる可能性
  - AIの独自性が薄れる

#### パターンC: ハイブリッド型
- **特徴**: 両方のモデルを構築し、予想を比較
- **実装例**:
  1. モデルA（オッズ無視）で予想
  2. モデルB（オッズ考慮）で予想
  3. 両者の差分を分析
  4. 最終的な投資判断は「AIと人間の予想が乖離している馬」を狙う

### 実装上の注意点

#### オッズの扱い方

```python
# パターン1: オッズを完全に除外
features_no_odds = [
    '過去成績', '血統', '騎手', '馬場', '距離', '枠番', '馬体重', ...
]

# パターン2: オッズを特徴量に含める
features_with_odds = [
    '過去成績', '血統', '騎手', '馬場', '距離', '枠番', '馬体重',
    'オッズ', '人気', ...
]

# パターン3: オッズ乖離度を計算
# AIの予想確率 vs 人間の予想（オッズ）の差
divergence = abs(ai_probability - (1 / odds))
```

#### 評価指標

両モデルを以下の指標で比較:
1. **的中率**: どちらが3連単を当てるか
2. **回収率**: どちらが儲かるか
3. **予想の独自性**: オッズとの相関係数
4. **大穴発見率**: 人気薄（オッズ高）の馬を的中させた回数

### 金沢ダート一本槍への適用

#### フェーズ1: 両モデルの構築
- モデルA: `predictor_no_odds.py` - オッズ除外
- モデルB: `predictor_with_odds.py` - オッズ含む

#### フェーズ2: 比較実験
- 過去データで両モデルの性能を比較
- 的中率・回収率・独自性を可視化

#### フェーズ3: 本番運用
- **戦略案1**: 両モデルが一致した時だけ購入（確信度重視）
- **戦略案2**: 両モデルが乖離した時だけ購入（大穴狙い）
- **戦略案3**: 回収率の高い方を採用

### 哲学的含意

#### AIは「大穴」を知らない

オッズを見ないAIにとって、全ての馬は「客観的データから見た確率」でしかない。

例:
- 人間: 「この馬はオッズ50倍の大穴だ」
- AI（オッズ無視）: 「この馬の勝率は客観的に15%と予想する」

→ もし的中すれば、5000円が75,000円に！

#### 「みんなが見落としている馬」を発見できるか？

人間の集団心理には以下のバイアスがある:
- **人気騎手バイアス**: 有名騎手を過大評価
- **前走バイアス**: 直近1走の結果に引きずられる
- **血統ブランドバイアス**: 有名種牡馬を過信
- **馬体重バイアス**: 増減に過剰反応

AIは冷静にこれらを統計的に評価できる。

### データ保存戦略

#### オッズデータの取得時期

現在の実装: `odds: null`

理由:
- レース前のオッズは時間と共に変動
- 確定オッズ（発走直前）が最も重要

**今後の方針**:
1. 確定オッズを結果と一緒に取得
2. YAMLに `final_odds` フィールドを追加
3. 実験用に両モデルを構築

### 結論

この実験は単なる予想精度向上ではなく、**「AIと人間の知恵をどう統合するか」という根本的な問いかけ**である。

金沢ダート一本槍プロジェクトは、この問いに対する実践的な答えを見つける場となる。

---

## 参考: 類似研究

- **集合知 vs AI**: 予測市場における人間の予想精度
- **バイアス除去**: 行動経済学的アプローチ
- **アンサンブル学習**: 複数モデルの組み合わせ

## 実装TODO

- [ ] オッズデータ取得機能の追加
- [ ] オッズ無視モデルの構築
- [ ] オッズ考慮モデルの構築
- [ ] 両モデルの比較実験
- [ ] 可視化ダッシュボード
- [ ] 本番運用時の判断ロジック

---

作成日: 2025-11-11
最終更新: 2025-11-11
