# ベンフォードの法則による公平性検証

**実行日時**: 2025-11-14 16:17:49

```
金沢競馬データ - ベンフォードの法則による公平性検証
実行日時: 2025-11-14 16:17:48
データベース: /home/d131/repos/2025/kanazawa-dirt-one-spear/backend/kanazawa_dirt_one_spear.db

================================================================================
ベンフォードの法則とは
================================================================================

自然発生的な数値データの最初の桁は、以下の分布に従うという経験則:
  1: 30.1%
  2: 17.6%
  3: 12.5%
  4: 9.7%
  5: 7.9%
  6: 6.7%
  7: 5.8%
  8: 5.1%
  9: 4.6%

この法則は、会計不正の検出や選挙結果の公平性検証などに使われます。
金沢競馬の結果がこの法則に従えば、自然な結果（公平性）が示唆されます。
    

================================================================================
1着馬の馬番 - ベンフォードの法則検証
================================================================================

サンプル数: 8,717

【最初の桁の分布】
 桁  観測数   観測%  期待%     差分
 1 1489 17.08 30.1 -13.02
 2  991 11.37 17.6  -6.23
 3  998 11.45 12.5  -1.05
 4  970 11.13  9.7   1.43
 5 1004 11.52  7.9   3.62
 6  906 10.39  6.7   3.69
 7  905 10.38  5.8   4.58
 8  851  9.76  5.1   4.66
 9  603  6.92  4.6   2.32

【統計検定結果】
カイ二乗値: 1819.9452
p値: 0.000000
❌ ベンフォードの法則から大きく逸脱（要調査）

3連単配当: データが不十分です

================================================================================
馬体重 - ベンフォードの法則検証
================================================================================

サンプル数: 78,391

【最初の桁の分布】
 桁   観測数   観測%  期待%     差分
 1     0  0.00 30.1 -30.10
 2     0  0.00 17.6 -17.60
 3  2156  2.75 12.5  -9.75
 4 66695 85.08  9.7  75.38
 5  9540 12.17  7.9   4.27
 6     0  0.00  6.7  -6.70
 7     0  0.00  5.8  -5.80
 8     0  0.00  5.1  -5.10
 9     0  0.00  4.6  -4.60

【統計検定結果】
カイ二乗値: 521769.7530
p値: 0.000000
❌ ベンフォードの法則から大きく逸脱（要調査）

================================================================================
レース距離の分布（参考）
================================================================================
※ レース距離は固定値が多いため、ベンフォードの法則には不適です

【距離別レース数】
1300m:   94回 ( 1.08%)
1400m: 3964回 (45.39%)
1500m: 4095回 (46.89%)
1700m:  434回 ( 4.97%)
1900m:   71回 ( 0.81%)
2000m:   42回 ( 0.48%)
2100m:   22回 ( 0.25%)
2300m:    1回 ( 0.01%)
2600m:   10回 ( 0.11%)

================================================================================
検証完了
================================================================================

【解釈のポイント】
- p値 > 0.05: ベンフォードの法則に従う → 公平性が示唆される
- p値 < 0.05: ベンフォードの法則から逸脱 → 何らかのパターンが存在
- 逸脱が必ずしも不正を意味するわけではありません
  - 競馬特有の構造（枠順の制約、馬番の割り当て方法など）による自然な偏り
  - サンプル数が少ない場合の統計的ゆらぎ

【次のステップ】
- 逸脱が見られた場合は、その原因を詳細に調査
- 年度別、距離別など、セグメント別の分析
- 他の公平性指標との組み合わせ
    

```
